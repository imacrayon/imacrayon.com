<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="referrer" content="always">
    <link rel="canonical" href="https://imacrayon.com/words/an-inline-svg-component-using-vue-and-laravel-mix">

    <title>An Inline SVG Component Using Vue &amp; Laravel Mix | I&#039;m a crayon</title>
    <meta name="description" content="Building an SVG icon Vue component">

    <link rel="icon" href="/favicon.svg">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#AA8C2C">

    <meta property="og:title" content="An Inline SVG Component Using Vue &amp; Laravel Mix | I&#039;m a crayon"/>
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://imacrayon.com/words/an-inline-svg-component-using-vue-and-laravel-mix"/>
    <meta property="og:description" content="Work by Christian Taylor. An artist &amp; full stack developer based in Wichita, KS." />

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@ima_crayon">
    <meta name="twitter:creator" content="@ima_crayon">

    
    <link href="https://twitter.com/ima_crayon" rel="me">

    
    <link rel="webmention" href="https://webmention.io/imacrayon.com/webmention" />
    <link rel="pingback" href="https://webmention.io/imacrayon.com/xmlrpc" />

    <link href="/feed.atom" type="application/atom+xml" rel="alternate" title="I&#039;m a crayon Atom Feed">

    <link rel="stylesheet" href="/assets/css/main.css?id=04e600291c4a9453082a11c3f2e48b4b">

    <script src="/assets/js/webmention.js" data-page-url="https://imacrayon.com/pictures/" async></script>
  </head>
  <body class="text-gray-700 font-sans antialiased">
    <header role="banner" class="mt-12">
      <div class="mx-auto px-4 max-w-2xl">
        <a class="sr-only block bg-black text-white text-lg text-center font-medium focus:not-sr-only" href="#main">
          <span class="block p-4">Skip to content</span>
        </a>
        <div class="flex items-center text-sm">
          <a class="text-gray-500 hover:bg-gold-100 hover:text-gold-800" href="/" title="I&#039;m a crayon home">
            I'm a crayon
          </a>
          <div class="flex flex-1 justify-end items-center">
             <nav class="flex items-center justify-end space-x-6">
   <a class="inline-flex items-center hover:bg-gold-100 hover:text-gold-800" href="/pictures">
  Pictures
</a>
 
   <a class="inline-flex items-center hover:bg-gold-100 hover:text-gold-800" href="/about">
  About
</a>
 
</nav>
 
          </div>
        </div>
      </div>
    </header>
    <main id="main">
      <div class="pt-12">
  <article class="mx-auto px-4 max-w-2xl">
    <div class="space-y-2">
      <h1 class="text-2xl sm:text-3xl font-medium break-words">An Inline SVG Component Using Vue &amp; Laravel Mix</h1>
      <div class="grid sm:grid-cols-2 gap-1">
        <div>
           <time class="block text-gray-500 text-xs uppercase tracking-widest" datetime="2019-08-25T14:24:00+00:00">
  August 25, 2019
</time>
 
        </div>
                  <div class="text-xs uppercase tracking-widest flex justify-end">
            <div>
                              <a href="/words/categories/vue" class="hover:text-gold-800 focus:text-gold-800 hover:bg-gold-100 focus:bg-gold-100">vue</a>,                               <a href="/words/categories/laravel" class="hover:text-gold-800 focus:text-gold-800 hover:bg-gold-100 focus:bg-gold-100">laravel</a>,                               <a href="/words/categories/php" class="hover:text-gold-800 focus:text-gold-800 hover:bg-gold-100 focus:bg-gold-100">php</a>,                               <a href="/words/categories/svg" class="hover:text-gold-800 focus:text-gold-800 hover:bg-gold-100 focus:bg-gold-100">svg</a>                          </div>
          </div>
              </div>
    </div>

    <div class="mt-10 prose max-w-full">
      <p>I wanted a Vue component that could pull any SVG from a file and inline it onto the page. <a href="https://gist.github.com/imacrayon/f72ce5e40ec30d047b5eda0ae6ea0e39">View a gist of the full code here</a>.</p>

<p><a href="https://laracasts.com/series/practical-vue-components/episodes/6">Jeffery Way</a> and <a href="https://calebporzio.com/using-inline-svgs-in-vue-compoments/">Caleb Porzio</a> have already tackled this problem. However, their solutions wrapped the SVG output in a <code>&lt;div&gt;</code> tag. Extra elements like this feel gross to me, so I modified their work and came up with a solution that outputs clean SVGs instead.</p>

<h2>The Webpack Config</h2>

<p>First, Webpack needs to be configured to handle SVG paths with <a href="https://github.com/webpack-contrib/html-loader">HTML Loader</a>. By default Laravel Mix is configured to use File Loader, you can override this config with the code below:</p>

<pre><code class="language-javascript">mix.override(config =&gt; {
    config.module.rules.find(rule =&gt; rule.test.test('.svg')).exclude = /\.svg$/

    config.module.rules.push({
        test: /\.svg$/,
        use: [{ loader: 'html-loader' }],
    })
})
</code></pre>

<h2>The Vue Component</h2>

<p>The Vue component should accept an SVG file name as a prop and then output the SVG onto the page, like this:</p>

<pre><code class="language-html">&lt;icon name="user" /&gt;
</code></pre>

<p>Here's the basic Vue component structure:</p>

<pre><code class="language-vue">&lt;template&gt;
    &lt;!-- &lt;svg&gt; element will eventually render here --&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
    props: ['name'],
}
&lt;/script&gt;
</code></pre>

<p>Next, we will pull the SVG file and transform it into a DOM Node. Using a DOM node we can work with our SVG more easily than trying to parse the raw SVG code as a string. I've added a <code>created</code> hook that will do this below:</p>

<pre><code class="language-vue">&lt;template&gt;
    &lt;!-- &lt;svg&gt; element will eventually render here --&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
    props: ['name'],

    created() {
        const div = document.createElement('div')
        // Adjust the path below to point to your own SVG directory
        div.innerHTML = require('../../' + this.name + '.svg')

        const fragment = document.createDocumentFragment()
        fragment.appendChild(div)

        const svg = fragment.querySelector('svg')
    },
}
&lt;/script&gt;
</code></pre>

<p>As soon as our Vue component is created, we create a <code>&lt;div&gt;</code> and set its <code>innerHTML</code> to the SVG file's HTML. Then we place the <code>&lt;div&gt;</code> inside of a document fragment and query for the SVG node inside. Building a document fragment in this way lets us use the Vue DOM API without having to actually insert any elements into our webpage's real DOM.</p>

<p>Finally, now that we have our <code>svg</code> node we can finish off the <code>&lt;template&gt;</code> code that will render the SVG onto the page.</p>

<pre><code class="language-vue">&lt;template&gt;
    &lt;svg v-bind="attributes" v-html="html"&gt;&lt;/svg&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
    props: ['name'],

    data: () =&gt; ({
        attributes: {},
        html: '',
    }),

    created() {
        const div = document.createElement('div')
        div.innerHTML = require('../../' + this.name + '.svg')

        const fragment = document.createDocumentFragment()
        fragment.appendChild(div)

        const svg = fragment.querySelector('svg')

        const attributes = Array.from(svg.attributes).reduce((attrs, attr) =&gt; {
            attrs[attr.name] = attr.value

            return attrs
        }, {})

        this.attributes = Object.assign(attributes, this.$attrs)

        this.html = svg.innerHTML
    },
}
&lt;/script&gt;
</code></pre>

<p>In the code above, we grab all of the SVG node's attributes and merge them with any attributes that might exist on our Vue component (contained in <code>$attrs</code>). Then we copy over the <code>innerHTML</code> from our SVG node and output in our Vue template using the <code>v-html</code> directive.</p>

<p><strong>And we're done!</strong> Now we have a super flexible inline SVG component: Any attributes applied to the component will be inherited by the SVG.</p>

<pre><code class="language-html">&lt;icon name="user" width="16px" height="16px" fill="red"&gt;&lt;/icon&gt;
</code></pre>
    </div>

    <nav class="my-12 border-t border-gray-200 grid sm:grid-cols-2 sm:border-0 sm:gap-8">
              <a class="group border-b border-gray-200 flex hover:bg-gold-50 hover:text-gold-800" href="https://imacrayon.com/words/mobile-friendly-tables" title="Older Post: Mobile Friendly Tables">
          <span class="flex-shrink-0 flex items-center group-hover:bg-gold-100">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="24" class="h-6 w-6 text-gray-400 group-hover:text-gold-400" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
            </svg>
          </span>
          <span class="flex-1 py-3 px-6 flex items-center justify-end text-right">
            <span class="space-y-1">
              <span class="font-medium">Mobile Friendly Tables</span>
               <time class="block text-gray-500 text-xs uppercase tracking-widest" datetime="2019-07-14T17:13:00+00:00">
  July 14, 2019
</time>
 
            </span>
          </span>
        </a>
                    <a class="group border-b border-gray-200 flex hover:bg-gold-50 hover:text-gold-800" href="https://imacrayon.com/words/dotfiles" title="Newer Post: A Clean Start With Dotfiles">
          <span class="flex-1 py-3 px-6 flex items-center">
            <span class="space-y-1">
              <span class="font-medium">A Clean Start With Dotfiles</span>
               <time class="block text-gray-500 text-xs uppercase tracking-widest" datetime="2020-01-28T17:54:00+00:00">
  January 28, 2020
</time>
 
            </span>
          </span>
          <span class="flex-shrink-0 flex items-center group-hover:bg-gold-100">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="24" class="h-6 w-6 text-gray-400 group-hover:text-gold-400" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
          </span>
        </a>
          </nav>

    <div id="mentions" class="space-y-8 mb-12">
      <h2 class="text-2xl sm:text-3xl font-medium">Mentions</h2>
              <p class="italic text-gray-500">Nothing.</p>
          </div>
  </article>
</div>
    </main>
    <footer class="mb-12 text-sm flex justify-center">
       <nav class="flex items-center justify-end space-x-6">
   <a class="inline-flex items-center hover:bg-gold-100 hover:text-gold-800" href="/pictures">
  Pictures
</a>
 
   <a class="inline-flex items-center hover:bg-gold-100 hover:text-gold-800" href="/about">
  About
</a>
 
</nav>
 
    </footer>
  </body>
</html>
